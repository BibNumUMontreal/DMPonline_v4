<% answer = @plan.answer(question.id) %>
<%= semantic_form_for answer, :url => {:controller => :answers, :action => :create }, :html=>{:method=>:post}, :remote => true do |f| %>
	<%= f.inputs do %>
		<%= f.input :plan_id, :as => :hidden %>
		<%= f.input :question_id, :as => :hidden %>
		<% if question.multiple_choice %>
			<% options = question.options.map %>
			<% if question.multiple_permitted %>
				<% if question.is_expanded %>
					<%= f.input :options, :as => :check_boxes, :collection => options, :label => question.text %>
				<% else %>
					<%= f.input :options, :as => :select, :collection => options, :label => question.text, :input_html => { :multiple => true } %>
				<% end %>
			<% else %>
				<% if question.is_expanded %>
					<%= f.input :options, :as => :radio, :collection => options, :label => question.text %>
				<% else %>
					<%= f.input :options, :as => :select, :collection => options, :label => question.text, :input_html => { :multiple => false } %>
				<% end %>
			<% end %>
		<% else %> 
		<%= label_tag("answer_text_#{question.id}".to_sym, question.text) %><%= text_area_tag("answer_text_#{question.id}".to_sym, answer.text, class: "tinymce") %>
		<% end %>
	<% end %>
	<%= f.actions %>
	<% if answer.created_at.nil? then %>
		<span id='<%= question.id %>-status' class="label label-warning answer-status"><%= "Not answered yet" %></span>
	<% else %>
		<span id='<%= question.id %>-status' class="label label-info answer-status"><abbr class="timeago" title="<%= answer.created_at.utc.iso8601 %>"><%= answer.created_at %></abbr></span>
	<% end %>
	
<% end %>